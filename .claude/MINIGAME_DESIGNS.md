# ミニゲーム設計仕様書

## 概要

ヘックスタイルベースのクラシックボードゲーム集。20種の2Dキャラクタースプライトをゲーム駒として使用し、12枚のヘックスタイルでボードを構築。ターン制、1-4プレイヤー対応、短時間プレイ（1-3分/ゲーム）。

### 技術的制約
- **アセット**: 8Set Hex Tiles（12タイル）+ Tomatocol Characters（20スプライト）
- **レンダリング**: 2Dトップダウンビュー
- **シェーダー**: 軽量版統一ライブラリ（基本トゥーン、2ゾーンカラー）
- **パフォーマンス**: 複数キャラクター同時表示、俯瞰カメラ最適化

---

## Phase 1: MVP（最小実装3ゲーム）

### 1. Tic-Tac-Toe Hex（三目並べ・ヘックス版）

**ゲームタイプ**: 2プレイヤー対戦

**ルール**:
- 3×3ヘックスグリッド（9タイル）
- 先手・後手が交互に駒を配置
- 直線3つ揃えたら勝利（縦、横、斜め）
- ヘックス特性: 6方向チェック対応

**使用アセット**:
- ベースタイル: Grass（9枚）
- ゲーム駒: Player 1用スプライト1種、Player 2用スプライト1種

**実装難易度**: ★☆☆☆☆（最も簡単）

**シェーダー要件**:
- タイル選択ハイライト（チームカラー: 青/赤）
- 有効手表示（半透明グロー）
- 勝利ライン強調（フラッシュアニメーション）

**開発優先度**: 最優先（プロトタイプ検証用）

---

### 2. Hex Reversi（リバーシ・オセロ）

**ゲームタイプ**: 2プレイヤー対戦

**ルール**:
- 7×7ヘックスグリッド（49タイル）
- 駒を挟んで裏返す（ヘックス6方向）
- 最終的に多くの駒を持つプレイヤーが勝利
- ヘックス適応: 隣接6方向すべてで挟み判定

**使用アセット**:
- ベースタイル: Stone（49枚）
- ゲーム駒: 両面スプライト（2種×回転/反転）

**実装難易度**: ★★☆☆☆

**シェーダー要件**:
- 駒フリップアニメーション（180度回転）
- 有効手カウント表示（数字オーバーレイ）
- 最終スコア強調（グラデーションエフェクト）

**開発優先度**: 高（MVP第2候補）

---

### 3. Hex Checkers（チェッカー）

**ゲームタイプ**: 2プレイヤー対戦

**ルール**:
- 8×8ヘックスグリッド（64タイル）
- 斜め前方に移動、ジャンプして駒を取る
- ヘックス適応: 前方3方向移動、後方3方向（キング化後）
- 相手の駒をすべて取るか、相手が動けなくなったら勝利

**使用アセット**:
- ベースタイル: Sand（64枚）
- ゲーム駒: 通常駒2種、キング駒2種（王冠付きバリアント）

**実装難易度**: ★★★☆☆

**シェーダー要件**:
- 移動可能マス表示（矢印オーバーレイ）
- ジャンプパス強調（点線トレイル）
- キング昇格エフェクト（パーティクル）

**開発優先度**: 高（MVP第3候補）

---

## Phase 2: 拡張ゲーム（中級複雑度）

### 4. Hex Chinese Checkers（中国式チェッカー）

**ゲームタイプ**: 2-4プレイヤー

**ルール**:
- 星型ヘックスボード（61タイル）
- 自陣から対角の陣地へ駒を移動
- ジャンプ移動可能（連続ジャンプOK）
- 先に全駒を対岸に移動したプレイヤーが勝利

**使用アセット**:
- ベースタイル: Grass + Water（境界表現）
- ゲーム駒: 4チーム×10駒（カラーバリエーション）

**実装難易度**: ★★★★☆

**シェーダー要件**:
- 4チームカラー識別（色分け）
- ジャンプチェーン可視化（パス表示）
- ゴール陣地ハイライト（チームカラー対応）

**開発優先度**: 中

---

### 5. Hex Mancala（マンカラ）

**ゲームタイプ**: 2プレイヤー対戦

**ルール**:
- 2列×6ポケット + 2ゴール（14タイル）
- 種を反時計回りに配布
- ヘックス適応: 円形配置でポケット巡回
- 最終的に多くの種を集めたプレイヤーが勝利

**使用アセット**:
- ベースタイル: Stone（ポケット）、Water（ゴール）
- ゲーム駒: Small Bush（種の代わり）

**実装難易度**: ★★★☆☆

**シェーダー要件**:
- 種カウント表示（数字UI）
- 配布アニメーション（順次移動）
- ゴールプール蓄積エフェクト（積み上げ表現）

**開発優先度**: 中

---

## Phase 3: 高度ゲーム（実装チャレンジ）

### 6. Hex Catan（簡易版カタン）

**ゲームタイプ**: 2-4プレイヤー

**ルール**:
- ランダム地形生成（19タイル）
- 資源収集（ダイスロール）
- 建設（道、集落）による得点獲得
- 10点先取で勝利（簡易版ルール）

**使用アセット**:
- ベースタイル: 全4地形（Water, Grass, Sand, Stone）+ Mountain
- ゲーム駒: キャラクタースプライト（集落）、装飾（道）

**実装難易度**: ★★★★★

**シェーダー要件**:
- 地形タイプ識別（資源アイコン）
- 建設可能エリア表示（半透明プレビュー）
- ダイスロール番号表示（タイル上オーバーレイ）

**開発優先度**: 低（Phase 3後半）

---

### 7. Hex Battleship（海戦ゲーム）

**ゲームタイプ**: 2プレイヤー対戦

**ルール**:
- 各プレイヤー10×10ヘックスグリッド（非表示）
- 艦船を配置（2-5タイル長）
- 交互に座標を指定して攻撃
- 先に相手の艦船をすべて撃沈したプレイヤーが勝利

**使用アセット**:
- ベースタイル: Water（200枚、2グリッド分）
- ゲーム駒: キャラクタースプライト（艦船）、Stone Pile（命中マーカー）

**実装難易度**: ★★★★☆

**シェーダー要件**:
- フォグ・オブ・ウォー（未探索タイル暗転）
- 命中/外れエフェクト（水しぶき/爆発）
- 艦船配置プレビュー（半透明、回転対応）

**開発優先度**: 低

---

### 8. Hex Dominoes（ドミノ）

**ゲームタイプ**: 2-4プレイヤー

**ルール**:
- 各プレイヤーにドミノ牌を配布
- 場の牌と一致する数字を接続して配置
- ヘックス適応: 6方向接続可能
- 先に手札をなくしたプレイヤーが勝利

**使用アセット**:
- ベースタイル: Stone（場）
- ゲーム駒: 装飾タイル（ドミノ牌表現、数字テクスチャ）

**実装難易度**: ★★★☆☆

**シェーダー要件**:
- 数字表示（動的テクスチャ）
- 接続可能エッジハイライト（グロー）
- 牌配置アニメーション（スライド）

**開発優先度**: 中

---

### 9. Hex Peg Solitaire（ペグソリティア）

**ゲームタイプ**: 1プレイヤー（パズル）

**ルール**:
- 33ヘックスグリッド（中央1マス空き）
- ジャンプして駒を取り除く
- 最終的に1駒だけ残せばクリア

**使用アセット**:
- ベースタイル: Grass（33枚）
- ゲーム駒: キャラクタースプライト1種

**実装難易度**: ★★☆☆☆

**シェーダー要件**:
- 有効ジャンプ表示（矢印オーバーレイ）
- 駒削除アニメーション（フェードアウト）
- ソロパズル進捗UI（残り駒カウント）

**開発優先度**: 低（シングルプレイ拡張）

---

### 10. Hex Shogi（将棋・簡易版）

**ゲームタイプ**: 2プレイヤー対戦

**ルール**:
- 9×9ヘックスグリッド（81タイル）
- 駒ごとに異なる移動パターン
- ヘックス適応: 6方向ベースの移動ルール
- 王を取ったら勝利

**使用アセット**:
- ベースタイル: Stone（81枚）
- ゲーム駒: 各駒タイプ用スプライト（王、飛車、角等）

**実装難易度**: ★★★★★

**シェーダー要件**:
- 駒タイプ識別（アイコン表示）
- 移動範囲可視化（複雑パターン対応）
- 成駒エフェクト（色反転）

**開発優先度**: 最低（複雑度高、Phase 3末）

---

## シェーダー統一要件（全ゲーム共通）

### 必須機能
1. **ヘックスタイルハイライト**
   - 選択状態: 太枠（チームカラー）
   - ホバー状態: 半透明グロー
   - 無効状態: 暗転（50%明度）

2. **ゲーム駒レンダリング**
   - 2Dスプライト基本トゥーン
   - チームカラーティント（2ゾーン: ボディ/アクセント）
   - シンプルアウトライン（1-2px、俯瞰カメラ最適化）

3. **UIオーバーレイ**
   - 数字/アイコン表示（タイル上）
   - 半透明エフェクト（有効手、プレビュー）
   - アニメーション対応（移動、削除、強調）

4. **パフォーマンス**
   - ドローコール最小化（スプライトバッチング）
   - 動的バッチング対応
   - モバイル60fps維持（iPhone 11/Galaxy S10）

### オプション機能（高度ゲーム用）
- フォグ・オブ・ウォー（Hex Battleship）
- パーティクルエフェクト（昇格、撃破）
- 動的テクスチャ生成（数字、アイコン）

---

## 開発ロードマップ

### Week 5-6: ボードゲーム基盤構築
- ヘックスグリッドシステム
- 2Dスプライトレンダリングパイプライン
- タッチ入力ハンドリング
- ターン管理システム

### Week 7-8: Phase 1実装（MVP 3ゲーム）
- Tic-Tac-Toe Hex
- Hex Reversi
- Hex Checkers

### Week 9-10: Phase 2実装
- Hex Chinese Checkers
- Hex Mancala

### Week 11-12: Phase 3実装
- 残り5ゲーム（優先度順）
- ポリッシュ＆バランス調整

---

## 技術的課題と解決策

### 課題1: ヘックス座標系
**問題**: 正方形グリッドとは異なる座標管理が必要
**解決策**: Axial Coordinate System採用（q, r, s 3軸）

### 課題2: 限られたアセット数
**問題**: 12タイル、20スプライトのみ
**解決策**:
- タイル使い回し（カラーバリエーション）
- スプライトのプロシージャルティント
- UIオーバーレイで差別化

### 課題3: 複数ゲーム間のコード共有
**問題**: ゲームルールは異なるがUIは共通
**解決策**:
- 抽象基底クラス（HexBoardGame）
- 共通シェーダーライブラリ
- ゲームルールモジュール化

---

## 成功指標

### 技術指標
- [ ] 60fps維持（全10ゲーム、最大4プレイヤー）
- [ ] ドローコール < 50（1ゲームあたり）
- [ ] メモリ使用量 < 150MB（1ゲームあたり）

### ゲームデザイン指標
- [ ] 平均プレイ時間: 1-3分
- [ ] チュートリアル完了率 > 80%
- [ ] リプレイ率 > 50%（7日以内）

### 品質指標
- [ ] クラッシュ率 < 0.1%
- [ ] UI応答速度 < 100ms
- [ ] ロード時間 < 2秒

---

最終更新: 2026-02-21
